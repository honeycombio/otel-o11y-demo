<!DOCTYPE html>
<html lang="en">

<head>
    <script type="module" src="otelweb.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="traceparent" content="00-00000000000000000000000000000000-0000000000000000-00">
    <title>OTEL o11y demo</title>
    <link rel="shortcut icon" href="https://www.honeycomb.io/wp-content/themes/honeycomb/assets/img/favicon/favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">

    <style>
        body {
            text-align: center;
            background-color: black;
            color: white;
            font-family: Roboto;
            background-image: url('otel-o11y-demo.png');
            background-position: top 100px left 10px;
            background-repeat: no-repeat;
            background-size: 400px auto;
        }

        h1 {
            font-family: 'Roboto Mono', Roboto;
        }

        button {
            border: 5px solid orange;
            background-color: #fff;
            color: black;
            border-radius: 15px;
            padding: 10px 20px 10px 20px;
            margin: 5px 5px 5px 5px;
            font-weight: 700;
            font-size: 3rem;
            font-family: 'Roboto Mono', Roboto;
        }

        button:hover {
            border: 5px solid white;
            background-color: orange;
            color: white;
        }

        img {
            max-width: 100%;
        }

        #honeycomb {
            border-radius: 5px;
            margin: 5px;
            padding: 5px;
            background-color: white;
            width: auto;
        }

        div {
            font-weight:bolder;
            font-size: 1.2em;
        }

        div.content {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        img#loading-meme {
            width: 250px;
        }
    </style>
</head>

<body>
    <h1>OTEL o11y demo</h1>
    <p>Invoke Tier 1 service with...</p>
    <p>
        <button id="go_fast">üêá FAST</button>
        <button id="go_slow">üê¢ SLOW</button>
        <button id="go_error">‚ùå ERROR</button>
    </p>
    <div class="content">
        <img id="picture" src="#" alt="Picture" style="display:none"></img>
        <img id="loading-meme" src="./loading-meme.gif" alt="Loading Meme" style="display:none"></img>
    </div>
    <div id="message" style="display:none"></div>
    <!-- for testing purpose -->
    <div class="content" style="display:none">
        <input id="hidden" type="button" value="hidden" onclick="javascript:simVisibilityChange('hidden');"/>
        <input id="visible" type="button" value="visible" onclick="javascript:simVisibilityChange('visible');"/>
        <input id="pagehide" type="button" value="pagehide" onclick="javascript:simPageHide();"/>
    </div>
    <script type="text/javascript" src="index.js"></script>
</body>
<script type="text/javascript">
    // script to add a banner at the top of the page.
    // this may affect the poor LCP score
    window.onload = function() {
        // let's introduce poor LCP on approx. 25% of the cases
        if (Math.random() < 0.4) {
            setTimeout( function() {
                const banner = document.createElement('div');
                banner.innerHTML = '<a href="https://honeycomb.io"><img id="honeycomb" src="/proxy/get-image"/></a>';
                document.body.prepend(banner);
            }, 1000);
        }
    };
</script>
</html>